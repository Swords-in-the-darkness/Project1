<!DOCTYPE html>
<html lang="en">
<head>
    <title>Reel It</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
    /* Add a gray background color and some padding to the footer */
    footer {
      background-color: #f2f2f2;
      padding: 25px;
    }
    #movies-view{
      width: 500px;
      height: 752px;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Reel It</a>
    </div>
    <div class="navbar-header">
    <ul class="navbar-nav navbar-right" id="movie-form" name="movie-form">
      <!-- change movie-input to movieTitle or ID on other search form -->
      <label for="movie-input"></label> 
      <li><input class="form-control" id="movie-input" type="text"></li>
      <li><input class="form-control" id="submitButton" type="button" value="Search"></li>

      </ul>
    </div>
  </div>
  <br>
</nav>

<div class="container">
<div class="row"><br>
  <div class="col-sm-7" id="movies-view">

  </div><br>
  <div class="col-sm-5">
    <br><br>
    <div class="well movieDivVote">
      <h4>Audience Vote</h4>
    </div>
    <div class="well movieDivRelease">
       <h4>Released Date</h4>
    </div>
    <div class="well movieDivPlot">
       <h4>Plot</h4>
    </div>
    <div class="well movieDivGenre">
      <h4>Genres</h4>
    </div> 
       <div class="well movieDivHomepage">
      <h4>Homepage</h4>
    </div>  
  </div>
</div>
<hr>
</div>

<div class="container text-center">    
  <h3>Additional Content</h3>
  <br>
  <div class="row">
    <div class="col-sm-3">
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Some text..</p>
    </div>
    <div class="col-sm-3"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Some text..</p>    
    </div>
    <div class="col-sm-3">
      <div class="well ">
       <p>Some text..</p>
      </div>
      <div class="well ">
       <p>Some text..</p>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="well">
       <p>Some text..</p>
      </div>
      <div class="well">
       <p>Some text..</p>
      </div>
    </div>  
  </div>
  <hr>
</div>

<div class="container text-center">    
  <h3>You might also enjoy...</h3>
  <br>
  <div class="row">
    <div class="col-sm-2">
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 1</p>
    </div>
    <div class="col-sm-2"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 2</p>    
    </div>
    <div class="col-sm-2"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 3</p>
    </div>
    <div class="col-sm-2"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 4</p>
    </div> 
    <div class="col-sm-2"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 5</p>
    </div>     
    <div class="col-sm-2"> 
      <img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image">
      <p>Thing 6</p>
    </div> 
  </div>
</div><br>

<footer class="container-fluid text-center">
  <p>Reel It 2017</p>
</footer>
<script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script> 
<script type = "text/javascript">

$("#submitButton").on("click", function(event) {
  event.preventDefault();
  var movie = $("#movie-input").val().trim();
  var encodedMov = encodeURIComponent(movie);
  var movieID;
  var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://api.themoviedb.org/3/search/movie?&query=" + encodedMov +
      "&api_key=e78bedc80954fdbe9d13505b16448776",
    "method": "GET",
  };
  $.ajax(settings).done(function(respond) {
    console.log(respond);
    movieID = respond.results[0].id;
    console.log("ID: " + movieID);


var setting = {
  "async": true,
  "crossDomain": true,
  "url": "https://api.themoviedb.org/3/movie/"+movieID+"?append_to_response=videos%2C%20credits%2C%20similar%2C%20images%2C%20recommendations%2C%20keywords%2C%20reviews&language=en-US&api_key=e78bedc80954fdbe9d13505b16448776",
  "method": "GET",
  "headers": {},
  "data": "{}"
}

$.ajax(setting).done(function (response) {
  console.log(response);

// Generate Movie Div
    var movieDiv = $("<div class='movie'>");

// Movie ID
    // var movieID = response.results[0].id;
    // console.log("ID: " + movieID);

// Movie URL (through TMDB)
    var movieURL = settings.url;
    console.log("movieURL: " + movieURL);

// Movie Title
    var title = response.title;
    console.log("title: " + title);
    var movieTitleDisplay = $("<h2>").text(title);
    movieDiv.append(movieTitleDisplay);

// Movie Review/Score
    var rating = response.vote_average;
    var movieRatingDisplay = $("<p>").text(rating);
    $(".movieDivVote").append(movieRatingDisplay);

// Movie Released Date
    var released = response.release_date;
    console.log("released: " + released)
    var movieDateDisplay = $("<p>").text(released);
    $(".movieDivRelease").append(movieDateDisplay);

// Movie Plot
    var plot = response.overview;
    var moviePlotDisplay = $("<p>").text(plot);
    $(".movieDivPlot").append(moviePlotDisplay);

// Movie Homepage
    var movieWebsite = response.homepage;
    var movieHomepage = $("<a>").attr("href", movieWebsite);
    console.log(movieHomepage);
    $(".movieDivHomepage").append(movieHomepage.href);

// Movie Genres
    var genre1 = response.genres[0].name;
    var genre2 = response.genres[1].name;
    var movieGenres = $("<p>").text(genre1).append(genre2);
    $(".movieDivGenre").append(movieGenres);

// Movie Image (poster or backdrop)
    var imgURL = "https://image.tmdb.org/t/p/w500/" + response.poster_path;
    var image = $("<img>").attr("src", imgURL);
    image.addClass("img-responsive");
    movieDiv.append(image);
    

 // Prepend Movie
    $("#movies-view").prepend(movieDiv);
  });
});
});
</script>
</body>
</html>
